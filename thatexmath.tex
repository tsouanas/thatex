%{{{ [vim] 
% vim:foldmarker=%{{{,%}}}
% vim:foldmethod=marker
% vim:foldcolumn=4
%}}}
%% thatexmath.tex
%% author: Thanos Tsouanas <thanos@tsouanas.org>

\message{[ThaTeX-math]}

%%{{{ amstex & friends 
\let\knuthcases=\cases
\let\knuthproclaim=\proclaim
\let\knuthfootnote=\footnote
\let\knuthS=\S
\let\footnotebeforeamstex=\footnote
\input amstex
\let\footnote=\footnotebeforeamstex
\let\footnotebeforeamstex\relax
% euler fonts
\loadmsam % ams fonts
\loadmsbm % ams fonts
\loadbold % math bold fonts
\loadeufm % fraktur medium-weight 
%\loadeufb % fraktur bold
%\loadeusm % script medium-weight
%\loadeusb % script bold
%\loadeurm % cursive roman medium-weight
%\loadeurb % cursive roman bold
\let\AMSproclaim=\proclaim
\let\proclaim\relax
\input stmary  % does this load amssym?
\input ofs
\input amsfn

% ofs
\def\fomenc{AMS}
\setsimplemath

% load the rsfs(o) fonts
\font\tenscr=rsfso10
\font\sevenscr=rsfso7
\font\fivescr=rsfso5
\skewchar\tenscr='177 \skewchar\sevenscr='177 \skewchar\fivescr='177
\newfam\scrfam \textfont\scrfam=\tenscr \scriptfont\scrfam=\sevenscr \scriptscriptfont\scrfam=\fivescr
\def\scr#1{{\fam\scrfam#1}}

% load the ams msbm fonts
% use bbold10, bbold7, bbold5 for an alternative font
% that supports more characters (and digits!)
\font\tenbbb=msbm10
\font\sevenbbb=msbm7
\font\fivebbb=msbm5
\skewchar\tenbbb='177 \skewchar\sevenbbb='177 \skewchar\fivebbb='177
\newfam\bbbfam \textfont\bbbfam=\tenbbb \scriptfont\bbbfam=\sevenbbb \scriptfont\bbbfam=\fivebbb
\def\bbb#1{{\fam\bbbfam#1}}

% load the eufm fonts
\font\teneuf=eufm10
\font\seveneuf=eufm7
\font\fiveeuf=eufm5
\newfam\euffam \textfont\euffam=\teneuf \scriptfont\euffam=\seveneuf \scriptfont\euffam=\fiveeuf
\def\euf#1{{\fam\euffam#1}}

%%}}}

% mathfonts
\def\mathit#1{\hbox{\text{\it#1}}}
\def\mathrm#1{\hbox{\text{\rm#1}}}
\def\mathrmsmall#1{\hbox{\text{\sevenrm#1}}}
\def\mathrmtiny#1{\hbox{\text{\sixrm#1}}}
\def\mathsf#1{\hbox{\text{\sf#1}}}
\def\mathsfbf#1{\hbox{\text{\sfbf#1}}}
\def\mathtt#1{\hbox{\text{\tt#1}}}
\def\mathbf#1{\hbox{\text{\bf#1}}}
\def\txt#1{\text{\tt #1}}
\def\textrm#1{\text{\rm#1}}
\def\namedpred#1{\operatorname{#1}\nolimits}
\def\namedfun#1{\mathord{\mathit{#1}}}
\def\namedtype#1{\mathord{\mathsf{#1}}}
\def\namedop#1{\operatorname{#1}}
\def\cal{\Cal}

% funky symbols
\def\woohoo{\mathord{\ddot\smile}}
\def\boohoo{\mathord{\ddot\frown}}

% standard sets
\def\nats{{\bbb N}}
\def\rats{{\bbb Q}}
\def\ints{{\bbb Z}}
\def\reals{{\bbb R}}
\def\complex{{\bbb C}}
\def\bools{{\bbb B}}

% alternative font for other uses (for example implementations)
\def\Nats{{\mathord{\mathbf N}}}
\def\Rats{{\mathord{\mathbf Q}}}
\def\Ints{{\mathord{\mathbf Z}}}
\def\Reals{{\mathord{\mathbf R}}}
\def\Complex{{\mathord{\mathbf C}}} 
\def\Zero{{\mathsf 0}}%
\def\Succ{{\mathsf S}}%

% metadefs
\def\DefPred#1{\expandafter\def\csname #1\endcsname{{\namedpred{#1}}}}
\def\DefFun#1{\expandafter\def\csname #1\endcsname{{\namedfun{#1}}}}
\def\DefTyp#1{\expandafter\def\csname #1\endcsname{{\namedtype{#1}}}}
\def\DefPredicate#1#2{\def#1{{\namedpred{#2}}}}
\def\DefFunction#1#2{\def#1{{\namedfun{#2}}}}
\def\DefType#1#2{\def#1{{\namedtype{#2}}}}

% elementary math
\def\abs#1{\left|#1\right|}
\def\sizeof#1{\left|#1\right|}
\def\frac#1#2{{#1\over#2}}
\def\ntimes{\mathbin{\cdot}}
\def\stimes{\,}
\def\expop{\mathbin{\caret}}
\def\pow#1{^{#1}}
\def\plus{+}
\def\floor#1{\left\lfloor#1\right\rfloor}
\def\ceil#1{\left\lceil#1\right\rceil}
\def\cancel#1{\tikz[baseline] \node [strike out,draw,anchor=text,inner sep=0pt,color=black!33,text=black]{$#1$};}
\def\plusinfty{{+\infty}}
\def\minusinfty{{-\infty}}
\def\pminfty{{\pm\infty}}
\def\mpinfty{{\mp\infty}}
\let\pinfty=\plusinfty
\let\minfty=\minusinfty
\let\posinfty=\pinfty
\let\neginfty=\minfty
\let\nifty=\neginfty
\def\interval#1#2#3{\left#1{#2}\right#3}
\let\ival=\interval
\def\cbrt#1{{\root3\of{#1}}}

% matrices
\def\matrixp#1{\pmatrix#1\endpmatrix}

% misc symbols
\let\knuthphi=\phi
\let\phi=\varphi
\def\caret{\hat{}}

% combinatorics
\def\totperm#1{\namedfun{Perm}(#1)}
\def\perm#1#2{P(#1,#2)}
\def\comb#1#2{C(#1,#2)}
\def\binom#1#2{{{#1} \choose {#2}}}
\def\becomes{\mathrel{\rightsquigarrow}}
\def\transto{\mathrel{\rightsquigarrow}}
\def\transfrom{\mathrel{\leftsquigarrow}}
\def\bitrans{\leftrightsquigarrow}
\def\permf#1{\matrixp{#1}}
\def\permc#1{{\def\quad{\ \,}\permf{#1}}}

% layout/text tools
\def\leftbrace#1{\left\{#1\right.}
\def\rightbrace#1{\left.#1\right\}}
\def\brace#1{\left\{#1\right\}}
\definecolor{explanationcolor}{cmyk}{0,0,0,.666}
\def\explanationstyle#1{{\color{explanationcolor} #1}}
\def\fact#1{~\ensuremath{^{\text{\explanationstyle{(#1)}}}}}
\def\byfact#1{\text{\explanationstyle{(#1)}}}
\def\reffact#1{\text{\explanationstyle{(#1)}}}
\def\mathby#1{\text{\explanationstyle{(#1)}}}
\definecolor{hintstatuscolor}{cmyk}{0,0,0,.666}
\def\hintstatusstyle#1{{\sixrm\color{hintstatuscolor} (#1)}}
\def\explanation#1{\text{\explanationstyle{(#1)}}}
\def\nbby#1{&\qquad&\mathby{#1}}
\def\by#1{\nbby{#1}\\}
\def\bytag#1#2{\nbby{#1}\tag{#2}\\}
\def\qqby#1{&\qquad&\mathby{#1}}
\def\qtext#1{\quad\text{#1}\quad}
\def\qqtext#1{\qquad\text{#1}\qquad}
\def\qqqtext#1{\qqquad\text{#1}\qqquad}
\def\qqqqtext#1{\qqqquad\text{#1}\qqqquad}
\def\toverbrace#1#2{\overbrace{#1}^{\text{#2}}}
\def\moverbrace#1#2{\overbrace{#1}^{{#2}}}
\def\tunderbrace#1#2{\underbrace{#1}_{\text{#2}}}
\def\munderbrace#1#2{\underbrace{#1}_{{#2}}}
\def\calc#1{\alignat2\relax #1\endalignat}
\def\stepproof#1{\alignat2\relax #1\endalignat}
\def\ttherefore{$\therefore$~~}
\def\proofsteptnb#1{&\text{#1}}
\def\proofstepmnb#1{&{#1}}
\def\proofsteptby#1#2{&\text{#1}\qqby{#2}}
\def\proofstepmby#1#2{&{#1}\qqby{#2}}
\def\thereforetby#1#2{\proofsteptby{\ttherefore#1}{#2}}
\def\thereforemby#1#2{\proofsteptby{\ttherefore$#1$}{#2}}
\def\thereforetnb#1{\proofsteptnb{\ttherefore#1}}
\def\thereforemnb#1{\proofsteptnb{\ttherefore$#1$}}
\def\thereforet#1{\text{\ttherefore #1}}

% generic TeX symbol machinery
\def\smartnot{\mathpalette\NoT}
\def\NoT#1#2{\mathrel{\ooalign{\hfil$#1{#2}$\hfil\cr\hfil$#1/$\hfil}}}
\def\stackrel#1#2{{\buildrel{#1} \over {#2}}}

% generic tools
\def\ensuremath#1{\ifmmode#1\else$#1$\fi}
%\def\eqvdots{\mathmakebox[\widthof{${}={}$}][c]{\vdots}}
\def\eqvdots{\mathrel{\,\,\kern-.05em\mathord{\vdots}\,}}
\def\eqtype{\mathrel{\,\,\kern-.05em:\,}}

% number theory
\def\divides{\mathrel{\mid}}
\def\divideseqwidth{\;\mathrel{\mid}\;}
\let\knuthcong=\cong
\let\knuthncong=\ncong
\def\cong{\equiv}
\undefine\ncong
\def\ncong{\mathrel{\not\equiv}}
\def\congmod#1#2{#1\quad(\mod {#1})}
\def\modulo#1{\left(\mod{#1}\right)}
\def\ndivides{\mathrel{\nmid}}
\def\gengcd#1{\mathopen{\text{\rm gcd}(}#1\mathclose{)}}
\def\genlcm#1{\mathopen{\text{\rm lcm}(}#1\mathclose{)}}
\def\gcd#1#2{\left(#1,#2\right)}
\def\lcm#1#2{\left[#1,#2\right]}
\def\totsym{\varphi}
\def\tot#1{\mathopen{\totsym}\left({#1}\right)\mathclose{}}
\DefPred{Prime}
\DefPred{Even}
\DefPred{Odd}

% logic metalang
%\def\iffdf{\mathrel{\overset\triangle\iff}}
\def\defiff{\mathrel{{\buildrel{\text{\sixss def}} \over {\iff}}}}
\def\impliesbecause#1{\mathrel{{\buildrel{\text{\explanationstyle{\sixrm #1}}} \over {\implies}}}}
\def\pseudodefiff{\mathrel{{\buildrel{\text{\sixss ``def''}} \over {\iff}}}}
\def\askiff{\mathrel{{\buildrel{\text{?}} \over {\iff}}}}
\def\assiff{\mathrel{\;:\Longleftrightarrow \;}}
\let\letiff=\assiff
\def\defeq{\mathrel{{\buildrel{\text{\sixss def}} \over {=}}}}
\def\pseudodefeq{\mathrel{{\buildrel{\text{\sixss ``def''}} \over {=}}}}
\def\pseudoeq{\mathrel{\textrm{``$\mathord{=}$''}}}
\def\dotseq{\mathrel{{\buildrel{{...}} \over {=}}}}
\def\dotsiff{\mathrel{{\buildrel{{\dots}} \over {\iff}}}}
\def\askeq{\mathrel{{\buildrel{\text?} \over {=}}}}
\def\asteq{\mathrel{{\buildrel{\text*} \over {=}}}}
\def\eqlabel#1{\mathrel{{\buildrel{\text{\explanationstyle{(#1)}}} \over {=}}}}
\def\ifflabel#1{\mathrel{{\buildrel{\text{\explanationstyle{(#1)}}} \over {\iff}}}}
\def\eqass{\mathrel{=:}}
\def\asseq{\mathrel{:=}}
\let\leteq=\asseq
\let\eqlet=\eqass
\def\mland{{\mathbin{\;\;\text{\rm \andword}\;\;}}}
\def\mlor{{\mathbin{\;\;\text{\rm \orword}\;\;}}}
\def\nimplies{\smartnot\implies}
\def\lrdir{($\Rightarrow$)}
\def\rldir{($\Leftarrow$)}
\def\bidir{($\Leftrightarrow$)}
\def\lrdirset{($\subseteq$)}
\def\rldirset{($\supseteq$)}
\def\syneq{\mathrel{\equiv}}
\def\synneq{\mathrel{\not\equiv}}
\def\semeq{\mathrel{\eqcirc}}
\def\semneq{\mathrel{\not\eqcirc}}
\def\leadsto{\mathrel{\rightsquigarrow}}
\def\leadstoby#1{\decorateover{#1}{\leadsto}}
\def\abbreq{\mathrel{{\buildrel{\text{\sixss def}} \over {\equiv}}}}
\let\sugareq=\abbreq
\def\abbriff{\;\mathrel{{\buildrel{\text{\sixss def}} \over {\Lleftarrow\mkern-3mu\Rrightarrow}}\;}}
\let\sugariff=\abbriff
\def\eqin#1{\mathrel{=_{#1}}}

% grammars
\def\bnf#1{\left<\mathit{#1}\,\right>}
\def\bnfeq{\mathrel{\,::=\,}}
\def\bnfor{\mathrel{\,\mid\,}}
\def\bnfOR{\mathrel{\,\phantom{::}\,|\,\,\,}}

% logic formulae
\def\univ{U}
\def\limplies{\mathbin{\rightarrow}}
\def\limplied{\mathbin{\leftarrow}}
\def\liff{\mathbin{\leftrightarrow}}
\def\unique{{\exists!}}
\def\quantified#1{\bracket{\thinspace#1\thinspace}}
\def\quantifierabbr#1#2#3{\left(\/#1 #2\right)\!\quantified{#3}}
\def\lforall{\quantifierabbr{\forall}}
\def\lexists{\quantifierabbr{\exists}}
\def\lunique{\quantifierabbr{\unique}}
\def\pexists#1{\paren{\exists#1}}
\def\pforall#1{\paren{\forall#1}}
\def\punique#1{\paren{\unique#1}}
\def\zolang{{\frak L_0}}
\def\folang{{\frak L_1}}
\def\zolvars{{\mathrm{Pvar}}}
\def\folvars{{\mathrm{Var}}}
\def\folcons{{\mathrm{Con}}}
\def\folfuns{{\mathrm{Fun}}}
\def\folpreds{{\mathrm{Pred}}}
\def\folterms{{\cal T}}
\def\folarity{{\mathbf{a}}}

% booleans
\def\True{\mathsf{True}}
\def\False{\mathsf{False}}

% sets, relations, and functions
\def\notni{\not\ni}
\def\nleq{\mathrel{\not\leq}}
\def\ngeq{\mathrel{\not\geq}}
\def\intersection{\cap}
\let\inter=\intersection
\def\Intersection{\bigcap}
\let\Inter=\Intersection
\def\union{\cup}
\def\Union{\bigcup}
\def\Unionl{\Union\nolimits}
\def\Interl{\Inter\nolimits}
\let\minus=\setminus
\def\Product{\prod}
\let\Prod=\Product
\def\symdiff{\mathbin{\triangle}}
\def\surjto{\mathrel{\rightarrow\mkern-15mu\rightarrow}}
\let\surto=\surjto
\def\injto{\mathrel{\rightarrowtail}}
\def\bijto{\mathrel{\injto\mkern-15mu\rightarrow}}
\def\parto{\mathrel{\rightharpoonup}}
\def\ndeto{\mathrel{\rightsquigarrow}}
\def\decorateover#1#2{\mathrel{{\buildrel{#1} \over {#2}}}}
\def\to{\mathrel{\rightarrow}}
\def\from{\mathrel{\leftarrow}}
\def\toarrow#1{\mathrel{\decorateover{#1}{\mathord{-\mkern-8mu-\mkern-8mu\longrightarrow}}}}
\def\tolongarrow#1{\mathrel{\decorateover{#1}{\mathord{-\mkern-8mu-\mkern-8mu-\mkern-8mu-\mkern-8mu\longrightarrow}}}}
\def\fromarrow#1{\mathrel{\decorateover{#1}{\mathord{\longleftarrow\mkern-8mu-\mkern-8mu-}}}}
\def\fromlongarrow#1{\mathrel{\decorateover{#1}{\mathord{\longleftarrow\mkern-8mu-\mkern-8mu-\mkern-8mu-\mkern-8mu-}}}}
\def\reltoarrow#1{\mathrel{\decorateover{#1}{\mathord{-\mkern-8mu-\mkern-8mu\rightarrowtriangle}}}}
\def\relfromarrow#1{\mathrel{\decorateover{#1}{\mathord{\leftarrowtriangle\mkern-8mu-\mkern-8mu-}}}}
\let\rtoarrow=\reltoarrow
\let\rfromarrow=\relfromarrow
\let\ftoarrow=\toarrow
\let\ffromarrow=\fromarrow
\def\mapstoarrow#1{\mathrel{\decorateover{#1}{\mapsto}}}
\def\set#1{\left\{#1\right\}}
\def\fsset#1{\{#1\}}% fixed-size set
\def\bigset#1{{\mathopen{\big\{}{#1}\mathclose{\big\}}}}% forced big-size set
\def\tupa#1{\left<#1\right>}
\def\tupp#1{\left(#1\right)}
\let\tup=\tupa
\def\paren#1{{\left({#1}\right)}}
\def\lparen#1{{\left({#1}_{\vphantom ,}\right)}}% smart-large parens XXX
\def\bigparen#1{{\mathopen{\big(}{#1}\mathclose{\big)}}}% forced big-size parens
\def\Bigparen#1{{\mathopen{\Big(}{#1}\mathclose{\Big)}}}% forced Big-size parens
\def\biggparen#1{{\mathopen{\bigg(}{#1}\mathclose{\bigg)}}}% forced bigg-size parens
\let\funparen=\paren
\def\bracket#1{{\left[{#1}\right]}}
\def\bigbracket#1{{\mathopen{\big[}{#1}\mathclose{\big]}}}
\def\Bigbracket#1{{\mathopen{\Big[}{#1}\mathclose{\Big]}}}
\def\st{\;\mathord{\pmb{\mid}}\;}
\def\setst#1#2{\set{\,#1 \;\st\; #2\,}}
\def\setstt#1#2{\set{\,#1 \;\st\; \text{#2}\,}} % textmode in filter
\def\setlst#1#2{\set{\,#1 \ \;\middle|\;\  #2\,}} % sufficiently long such that
\def\setlstt#1#2{\set{\,#1 \ \;\middle|\;\  \text{#2}\,}}
\def\famst#1#2{{\paren{\,{#1} \,\st\, #2\,}}}
\def\family#1#2{{\paren{{#1}}_{#2}}}
\def\famil#1#2#3{{\family {{#1}_{#2}} {{#2}\in{#3}}}}
\def\sequence#1#2{{\set{#1_{#2}}_{#2}}}
\def\emph#1{{\it #1}}
\def\sset#1#2{\langle{#1}\mathrel{;}{#2}\rangle}
\def\ssetfont{\cal}
\def\finsubseteq{\subseteq_{\text{\sixss fin}}}
\def\finsubset{\subset_{\text{\sixss fin}}}
\def\seq#1{\left\langle#1\right\rangle}
\def\pset{{\wp}}
\def\psetfin{{\wp_{\text{\rm f}}}}
\let\powerset=\pset
\def\psetp#1{\pset\funparen{#1}}
\def\card#1{\abs{#1}}
\def\id{\mathrm{id}}
\def\idof#1{\mathord{\id}_{#1}}
\def\idone#1{\mathord{1_{#1}}}
%\def\cod{\mathop{\rm cod}\nolimits}
%\def\coim{\mathop{\rm coim}\nolimits}
\def\coim{\namedop{coim}}
\def\dom{\namedop{dom}}
\def\cod{\namedop{cod}}
\def\compose{\mathbin{\circ}}
\def\fcompose{\mathbin{\circ}}
\def\rcompose{\mathbin{\circ}}
\let\rcom=\rcompose
\let\fcom=\fcompose
\let\com=\compose
\def\trel#1{<<#1>>}
\def\mtrel#1{\text{<<#1>>}}
\def\eqclass#1#2{[\mathord{#1}\mathord{/}\mathord{#2}]}
\def\eqclassimp#1{[#1]}
\def\quoset#1#2{\mathord{#1}\mathord{/}\mathord{#2}}
\def\graph{\namedop{graph}}
\def\range{\namedop{range}}
\def\Img{\namedop{Im}}
\def\funimg#1#2{#1\bracket{#2}}
\def\funpreimg#1#2{#1^{-1}\bracket{#2}}
\let\img=\funimg
\let\pre=\funpreimg
\let\rel=\mathrel
\def\relp#1{\rel{\paren{#1}}}
\let\of=\fcompose
\let\following=\compose
\def\incto{\mathrel{\hookrightarrow}}
\def\resto{\mathbin{\mkern-2mu\upharpoonright\mkern-1mu}}
\def\restosub#1{\mathord{|}_{#1}}
\def\resfun#1#2{{#1}\resto{#2}}
\def\resfunsub#1#2{{#1}\restosub{#2}}
\def\lam#1#2{\lambda\,{#1}\,.\,{#2}}
\def\lamt#1#2{\lambda\,{#1}\,.\,{\text{#2}}}
\def\lamp#1#2{\lam{#1}{\paren{#2}}}
\def\plam#1#2{\paren{\lam{#1}{#2}}}
\def\plamp#1#2{\paren{\lamp{#1}{#2}}}
\def\lapp{\nobreak\;\nobreak}
\def\descrsym{\iota}
\def\descr#1#2{\descrsym\,{#1}\,.\,{#2}}
\def\bag#1{\mathord{\Lbag#1\Rbag}}
\def\inbag{\mathrel{\varepsilon}}
\def\bagunion{\mathbin{\Cup}}
\def\baginter{\mathbin{\Cap}}
\def\bagplus{\mathbin{\oplus}}
\def\notinbag{\mathrel{\mkern-2mu\not{\mkern-3mu\varepsilon}}}
\def\subbag{\mathrel{\Subset}}
\def\notsubbag{\mathrel{\not\Subset}}
\def\emptybag{\bag{\mkern-3mu}}
\def\finv#1{{#1}^{-1}}
\def\finvp#1{\finv{\paren{#1}}}
\def\rinv#1{\rel{{#1}^{-1}}}
\def\rinvp#1{\rinv{\paren{#1}}}
\def\rop#1{\rel{{#1}^{\partial}}}
\def\ropp#1{\rop{\paren{#1}}}
\def\frel#1{\approx_{#1}}
\def\relto{\mathbin{\rightarrowtriangle}}
\def\relfrom{\mathbin{\leftarrowtriangle}}
\let\rto=\relto
\let\fto=\to
\def\refclosure#1{\mathrel{{#1}_{\textrm{r}}}}
\def\symclosure#1{\mathrel{{#1}_{\textrm{s}}}}
\def\transclosure#1{\mathrel{{#1}_{\textrm{t}}}}
\def\reftransclosure#1{\mathrel{{#1}_{\textrm{rt}}}}
\let\rclosure=\refclosure
\let\sclosure=\symclosure
\let\tclosure=\transclosure
\let\rtclosure=\reftransclosure
\def\rclo#1{\mathrel{{#1}^{=}}}
\def\sclo#1{\mathrel{{#1}^{\leftrightarrow}}}
\def\tclo#1{\mathrel{{#1}^{+}}}
\def\rtclo#1{\mathrel{{#1}^{*}}}
\def\cclo#1{\mathrel{{#1}^{\circ}}}
\def\reclo#1{\mathrel{{#1}^{\triangleleft}}}
\def\leclo#1{\mathrel{{#1}^{\triangleright}}}
\def\transcl#1{\decorateover{+}{#1}}
\def\rtranscl#1{\decorateover{*}{#1}}
\def\symcl#1{\decorateover{\leftrightarrow}{#1}}
\def\refcl#1{\decorateover{=}{#1}}
\def\cross{\times}
\def\chr{\chi}
\def\app{\nobreak\,\nobreak}

% lambda calculus
\def\Llam#1#2{\lambda\,{#1}\,.\,{#2}}
\def\Lmac#1{\underline{\mathtt{#1}}}
\def\Lfinto{\rightarrow\mathrel{\kern-.8em}\rightarrow}
\def\Lnum#1{{\underline{#1}}}

% combinatory logic
\def\C#1{{\mathord{\mathsfbf{#1}}}}
\def\Cto{\mathrel{\triangleright}}
\def\cI{{\C I}}
\def\cK{{\C K}}
\def\cM{{\C M}}
\def\cC{{\C C}}
\def\cS{{\C S}}
\def\cW{{\C W}}
\def\cB{{\C B}}
\def\cR{{\C R}}
\def\cV{{\C V}}
\def\cBp{{{\C B}'}}

% set theory
\def\continuum{\euf{c}}
\def\finord#1{\overline{#1}}
\def\eqc{\mathrel{=_{\namedop{c}}}}
\def\neqc{\mathrel{\not\eqc}}
\def\leqc{\mathrel{\leq_{\namedop{c}}}}
\def\geqc{\mathrel{\geq_{\namedop{c}}}}
\def\gtc{\mathrel{>_{\namedop{c}}}}
\def\ltc{\mathrel{<_{\namedop{c}}}}
\def\Univ{{\bbb V}}
\def\complement#1{\widetilde{#1}}
\let\compl=\complement
\def\russell#1{{\mathbf{r}(#1)}}
\def\metain{\mathrel{\in\kern-0.425em\in}}
\let\inclass=\metain
\def\class#1#2{\pmb{\{}\;{#1}\;\st \;{#2}\;\pmb{\}}}
\def\classt#1#2{\pmb{\{}\;{#1}\;\st \;{\text{#2}}\;\pmb{\}}}
\def\classimg#1#2{{#1}{\pmb[}\,{#2}\,{\pmb]}}
\def\universet{{\cal U}}
\DefPred{Eq}
\DefPred{Set}
\DefPred{Singleton}
\DefPred{Doubleton}
\DefPred{Empty}
\DefPred{Universal}
\DefPred{Set}
\DefPred{Pair}
\DefPred{Function}
\DefPred{Relation}
\DefPred{Infinite}
\DefFun{first}
\DefFun{second}
\DefFun{swap}
\def\relspace#1{\namedop{Rel}\funparen{#1}}
\def\reltype#1{\namedop{Rel}\funparen{#1}}
\def\kurpair#1#2{\set{\set{#1}, \set{{#1}, {#2}}}}
\def\disjunion{\mathbin{\uplus}}
\def\Disjunion{\biguplus}
\let\dunion=\disjunion
\let\Dunion=\Disjunion
\def\setsucc#1{{#1}{}^+}
\def\kleenestar#1{{#1}^\star}
\def\kleenestarp#1{\paren{#1}^\star}
\let\kstar=\kleenestar
\let\kstarp=\kleenestarp

% types
\def\type#1{{\namedtype{#1}}}
\DefTyp{Nat}

% order theory
\def\smallcovby{\mathrel{-\mkern-8mu\Yleft}}
\def\covby{\mathrel{-\mkern-9mu<}}
\def\wellbelow{\mathrel{\ll}}
\let\wbelow=\wellbelow
\def\incomparable{\mathrel{\mid\mkern-2mu\mid}}
\def\altincomparable{\mathrel{\rangle\mkern-5mu\langle}}
\let\incomp=\incomparable
\def\embto{\mathrel{\hookrightarrow}}
\def\embijto{\hookrightarrow\mathrel{\mkern-15mu}\rightarrow}
\def\join{\mathbin{\vee}}
\def\meet{\mathbin{\wedge}}
\def\Join{\bigvee}
\def\Meet{\bigwedge}
\def\downsets#1{\cal O(#1)}
\let\downs=\downsets
\def\down{\mathord{\downarrow}}
\def\up{\mathord{\uparrow}}
\def\dualposet#1{{#1}^\partial}
\let\dual=\dualposet
\def\ubs#1{{#1}^{\mathrm{u}}}
\def\lbs#1{{#1}^{\ell}}
\def\lub{\namedop{lub}}
\def\glb{\namedop{glb}}
\def\fixpoints{\namedop{Fix}}
\def\lfp{\namedop{lfp}}
\def\gfp{\namedop{gfp}}

% group theory
\def\quogroup#1#2{\quoset#1#2}
\let\quogrp=\quogroup
\def\gord#1{\mathord{\it o}\funparen{#1}}
\def\tord#1{\mathrm{ord}\funparen{#1}}
\def\bord#1{\abs{#1}}
\def\ginv#1{{#1}^{-1}}
\def\ginvp#1{\ginv{\funparen{#1}}}
\def\ginvt{\namedfun{inv}}
\def\dih#1{{{\cal D}_{#1}}}
\makeatletter
\def\pmodr#1{\allowbreak \ifinner \mkern 8mu\else \mkern 18mu\fi ({\fam \z@ mod_{R}}\,\,#1)}
\def\pmodl#1{\allowbreak \ifinner \mkern 8mu\else \mkern 18mu\fi ({\fam \z@ mod_{L}}\,\,#1)}
\makeatother
\let\groupord=\gord
\def\subgroup{\leq}
\def\nsubgroup{\nleq}
\let\subgrp=\subgroup
\let\nsubgrp=\nsubgroup
\def\generate#1{\left\langle#1\right\rangle}
\let\gen=\generate
\def\normalsubgroup{\mathrel{\trianglelefteq}}
\let\normal=\normalsubgroup
\let\normsub=\normalsubgroup
\def\Aut{\namedop{Aut}}
\def\Autp#1{\aut\funparen{#1}}
\def\groupind#1#2{\left|\mathord{#1}\mathbin{:}\mathord{#2}\right|}
\def\altgroupind#1#2{i_{#1}(#2)}

% structured sets
\def\isomorphicto{\mathrel{\knuthcong}}
\let\isomorphic=\isomorphicto
\let\isoto=\isomorphic
\let\iso=\isoto

% placeholder hole
\definecolor{holecolor}{cmyk}{.25,.05,.05,0}
\def\hole{{\ensuremath{\colorbox{holecolor}{$\phantom{x}$}}}}
\def\dhole{{\mathord{-}}}
\def\bhole{{\mathord{\bullet}}}
\def\thole{\thinspace\vrule height 0.0pt depth 0.4pt width 1em\thinspace}
\def\lthole{\thinspace\vrule height 0.0pt depth 0.4pt width 2em\thinspace}
\def\xlthole{\thinspace\vrule height 0.0pt depth 0.4pt width 4em\thinspace}
\def\holed#1{{\ensuremath{\colorbox{holecolor}{$#1$}}}}

% strings
\def\concat{\mathbin{+\mkern-8mu+}}

% algorithm styling
\def\algorithmstyle#1{\text{{\scshape #1}}}

% code
\def\code#1{\mathtt{#1}}

% numerical
\def\digit#1{\text{\sf #1}}
\def\numeral#1{\underline{\text{\sf #1}}}

% complex numbers
\def\modulus#1{\left|#1\right|}

% analysis
\def\norm#1{\left\Vert#1\right\Vert}

