%{{{ [vim] 
% vim:foldmarker=%{{{,%}}}
% vim:foldmethod=marker
% vim:foldcolumn=4
%}}}
%% thatexproof.tex
%% author: Thanos Tsouanas <thanos@tsouanas.org>

% You must first load bussproofs.sty

% TODO: \I's ##2 argument is ignored.
% It should be used to determine the style of inference line: --, ==, etc.

\def\Assumption#1{\AxiomC{#1}}
\def\InfFromBy#1#2#3{
% write \RightLabel{#2} only for non-0 case
\ifcase#1
\AxiomC{}
\fi
% write \RightLabel{#2} in all cases
\RightLabel{#2}
\ifcase#1% 0
\UnaryInfC{#3}
\or% 1
\UnaryInfC{#3}
\or% 2
\BinaryInfC{#3}
\or% 3
\TrinaryInfC{#3}
\or% 4
\QuaternaryInfC{#3}
\or% 5
\QuinaryInfC{#3}
\fi
}

% PROOF{,m,r,mn,mr,mrw}:
% m = assume math mode for nodes
% r = put rule labels in \rulelabel{...}
% w = space-delimited args (words)
% n = naked (no labels)

\def\PROOF#1{
\def\A{\Assumption}
\def\Inf{\InfFromBy}
\def\I##1##2 ##3##4{
\InfFromBy##1{##3}{##4}
}
#1
\DisplayProof
}

\def\PROOFm#1{
\def\A##1{\Assumption{$##1$}}
\def\Inf{\InfFromBy}
\def\I##1##2 ##3##4{
\InfFromBy##1{##3}{$##4$}
}
#1
\DisplayProof
}

\def\PROOFmn#1{
\def\A##1{\Assumption{$##1$}}
\def\Inf{\InfFromBy}
\def\I##1##2 ##3{
\InfFromBy##1{}{$##3$}
}
#1
\DisplayProof
}

\def\PROOFr#1{
\def\A{\Assumption}
\def\Inf{\InfFromBy}
\def\I##1##2 ##3##4{
\InfFromBy##1{\rulelabel{##3}}{##4}
}
#1
\DisplayProof
}

\def\PROOFmr#1{
\def\A##1{\Assumption{$##1$}}
\def\Inf{\InfFromBy}
\def\I##1##2 ##3##4{
\InfFromBy##1{\rulelabel{##3}}{$##4$}
}
#1
\DisplayProof
}

\def\PROOFmrw#1{
\def\A##1 {\Assumption{$##1$}}
\def\Inf{\InfFromBy}
\def\I##1##2 ##3 ##4 {
\InfFromBy##1{\rulelabel{##3}}{$##4$}
}
#1
\DisplayProof
}

\def\infered#1\endinfered{\PROOF{#1}}
\def\infer#1\endinfer{\math#1\endmath}

